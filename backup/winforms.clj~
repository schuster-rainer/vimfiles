(ns winforms-test)
(System.Reflection.Assembly/LoadWithPartialName "System.Windows.Forms")
(comment
(System.Reflection.Assembly/Load "System.Windows.Forms,
Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"))

(import '(System.Windows.Forms 
           Application Form 
           Button MessageBox))

(defn createForm []
  (let [
        form (new Form)
        button (new Button)]

    (doto button
      (.set_Text "Click Me!")
      (.set_Top 10)
      (.set_Left 10)
      (.add_Click  
        (gen-delegate EventHandler [sender args]
          (MessageBox/Show "Hallo"))))

    (doto form
      (.set_Text "HelloWorld")
      (.. Controls (Add button)))))

(defn main []
  (Application/Run (createForm)))

(comment
"hints to the clr-interop can be found on rich hickeys wiki site from github: http://wiki.github.com/richhickey/clojure-clr/clr-interop")
